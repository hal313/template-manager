!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.TemplateManager={})}(this,function(e){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},r=function(e){return!!e&&e.hasOwnProperty("pattern")&&e.hasOwnProperty("replacement")},s=function e(){u(this,e)};s.forEach=function(n,t){Array.isArray(n)?n.forEach(t):Object.getOwnPropertyNames(n).forEach(function(e){t(n[e],e)})},s.merge=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var r={},i=void 0,o=void 0;if(n){i=Array.prototype.slice.call(n);for(var a=0;a<i.length;a++)if(o=i[a])for(var f in o)r[f]=o[f]}return r},s.isDefined=function(e){return null!=e},s.isNil=function(e){return!s.isDefined(e)||s.isDefined(e)&&""===e.toString().trim()},s.createResolverDefinition=function(e,n){if("string"!=typeof e)throw new Error("'pattern' must be a string, not '"+(void 0===e?"undefined":t(e))+"' ('"+e+"'); this error may occur if using an incomplete classic resolver definition - be sure all classic resolver definitions have both a 'pattern' and 'replacement'.");return{pattern:e,replacement:n}},s.normalizeResolverDefinition=function(e,n){return r(e)?s.createResolverDefinition(e.pattern,e.replacement):s.createResolverDefinition(e,n)},s.normalizeResolverDefinitions=function(e){var t=[];return e&&s.forEach(e,function(e,n){r(e)?t.push(s.normalizeResolverDefinition(e)):t.push(s.normalizeResolverDefinition(n,e))}),t},s.version="1.1.7";var f=function e(n,t){return"function"==typeof n?e(n(t)):n},c=function(i,e,o){var a=i;return s.forEach(e,function(e){var n,t=(n=e.pattern,new RegExp("\\${"+n+"}","gi")),r=void 0;r="function"==typeof e.replacement?e.replacement(e.pattern,i,a):e.replacement,a=void 0===r?a.replace(t,f(o.undefinedReplacement,e.pattern)):null===r?a.replace(t,f(o.nullReplacement,e.pattern)):a.replace(t,r)}),a},l=function e(n,t){u(this,e);var o=s.normalizeResolverDefinitions(n),a=s.merge({nullReplacement:e.identityResolver,undefinedReplacement:e.identityResolver},t);this.resolve=function(e,n){var t=e,r=void 0,i=[];if(!s.isDefined(e))return e;if(o&&s.forEach(o,function(e){i.push(e)}),n&&s.forEach(s.normalizeResolverDefinitions(n),function(e){i.push(e)}),i.length)for(;t!==(r=c(t,i,a));)t=r;return t}};l.identityResolver=function(e){return"${"+e+"}"};var p=function(e){if(s.isNil(e))throw new Error("Invalid template name: '"+e+"'/");return e},n=function e(a,n){var r=this;u(this,e);var f=s.merge({scriptType:"text/x-template-manager"},n),i={},c=function(e,n){i[p(e)]=n};this.get=function(e){var o=function(e){if(!r.hasTemplate(p(e)))throw new Error("Template '"+e+"' does not exist");return i[e]}(p(e));return{process:function(e){return n=o,t=e,i=[],(r=a)&&s.forEach(r,function(e,n){i.push(s.normalizeResolverDefinition(e,n))}),t&&s.forEach(t,function(e,n){i.push(s.normalizeResolverDefinition(e,n))}),(new l).resolve(n,i);var n,t,r,i},raw:function(){return o}}},this.add=function(e,n){var t=p(e);if(r.hasTemplate(t))throw new Error("Duplicate template name '"+e+"'");if(!s.isDefined(n))throw new Error("Template must be defined");return c(t,n),r.get(t)},this.load=function(e){var n=(e||document).getElementsByTagName("script");s.forEach(n,function(e,n){var t,r,i=void 0,o=void 0;f.scriptType===e.type&&(r="name",i=(t=e).getAttribute(t,r)||t.getAttribute("data-"+r),o=e.innerHTML.trim(),p(i),c(i,o))})},this.remove=function(e){delete i[p(e)]},this.getTemplateNames=function(){var t=[];return s.forEach(i,function(e,n){t.push(n)}),t},this.hasTemplate=function(e){return s.isDefined(i[p(e)])},this.empty=function(){i={}}};n.version=l.version="1.1.7",e.StringResolver=l,e.TemplateManager=n,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=TemplateManager.min.js.map